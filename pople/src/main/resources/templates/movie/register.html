<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/layout}">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		  content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>영화 등록</title>
</head>
<body>

<div layout:fragment="content" class="m-2 p-2 ">
		<h1 class="mt-5"> 영화 등록 페이지 </h1>
		<h3  th:if="${isOk}" th:text="${isOk}"></h3>

		<div>
			<form th:action="@{/movie/register}" th:method="post">
				<div class="form-group">
					<label>제목</label>
					<input type="text" class="form-control" name="movieName" placeholder="영화 제목">
				</div>

				<div class="form-group fileForm">
					<label>영화 이미지</label>
					<div id="show2">
						<div class="alert alert-light p-1" role="alert">

						</div>
						<div class="alert alert-light" role="alert">
							<img src="#" id="preview" width="300">
						</div>
					</div>
					<div class="custom-file">
<!--						<input type="file" class="custom-file-input files" id="fileInput" name="moviePoster" multiple>-->
						<input type="file"  name="moviePoster" id="moviePoster"
							   onchange="readURL(this)"
							   class="form-control  p-2" multiple>


						<label class="custom-file-label" data-browse="Browse"></label>
					</div>
				</div>
				<div>
					<label>영화줄거리 </label>
					<input type="text" name="movieSummary" class="form-control" placeholder="영화줄거리">
				</div>
				<div>
					<label>영화러닝타임 </label>
					<input type="text" name="movieTime" class="form-control" placeholder="영화러닝타임">
				</div>
				<div>
					<label>영화관람등급 </label>
					<input type="text" name="movieRating" class="form-control" placeholder="영화관람등급">
				</div>
				<div>
					<label>영화개봉일 </label>
					<input type="text" name="movieDate" class="form-control" placeholder="영화개봉일">
				</div>


				<button type="submit" class="btn btn-primary">등록하기 </button>
			</form>
		</div>


	</div>
</body>
<script  layout:fragment="script" th:inline="javascript">
$(function(){


})


$('#show2').hide()
	function readURL(moviePoster){

		$('#show2').show()

		if(moviePoster.files && moviePoster.files[0]){
			//파일 입출력 처리하는 객체 생성
			var reader = new FileReader();

			reader.onload = function(e){
				//html에 소스 넘겨주기
				$('#preview').attr('src',e.target.result)

				//${show = "1"}

			}
			reader.readAsDataURL(moviePoster.files[0])

		}

	}

</script>


</html>